<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Edgar Diaz-Gutierrez</title>
  <style>
    body {
      visibility: hidden;
    }
  </style>
  <link rel="stylesheet" href="css/styles.css" />
</head>

<body>
  <!-- 1. Wrap your sidebar + main in the layout-container -->
  <div class="layout-container">
    <!-- LEFT COLUMN: static bio, nav & socials -->
    <aside class="left-column">
      <header id="main-header">
        <div class="logo">
          <h1>Edgar Diaz-Gutierrez</h1>
        </div>
        <nav class="header-nav">
          <p class="tagline">Full-Stack Software Engineer</p>
          <p class="contact">
            <a href="mailto:edgar.s.dzgz@gmail.com">edgar.s.dzgz@gmail.com</a> |
            (619) 750-4888
          </p>
        </nav>
      </header>

      <nav class="scroll-nav">
        <ul>
          <li><a href="#summary">About</a></li>
          <li><a href="#career">Career</a></li>
          <li><a href="#projects">Projects</a></li>
          <li><a href="#tech">Tech Stack</a></li>
          <li><a href="#education">Education</a></li>
          <li><a href="#closing">Let’s Connect</a></li>
        </ul>
      </nav>

      <div class="social-sidebar">
        <a href="https://github.com/edgarsdzgz" target="_blank" aria-label="GitHub">🐙</a>
        <a href="https://www.linkedin.com/in/edgar-dzgz/" target="_blank" aria-label="LinkedIn">🔗</a>
        <a href="mailto:edgar.s.dzgz@gmail.com" aria-label="Email">✉️</a>
      </div>
    </aside>

    <!-- RIGHT COLUMN: dynamic résumé content -->
    <main class="right-column">
      <!-- 1. Summary -->
      <section id="summary">
        <p>…</p>
      </section>

      <!-- 2. Career Timeline -->
      <section id="career">
        <!-- timeline items… -->
      </section>

      <!-- 3. Projects -->
      <section id="projects">
        <!-- project list… -->
      </section>

      <!-- 4. Tech Stack -->
      <section id="tech">
        <!-- tech stack… -->
      </section>

      <!-- 5. Education -->
      <section id="education">
        <!-- education list… -->
      </section>

      <!-- 6. Closing -->
      <section id="closing">
        <!-- closing blurb… -->
      </section>
    </main>
  </div>

  <!-- 2. Pull the theme-toggle button out of the header so it sits above everything -->
  <button id="theme-toggle" aria-label="Toggle theme">🌓</button>

  <!-- 3. Your existing script, unmodified -->
  <script>
    window.addEventListener('load', () => {
      document.body.style.visibility = 'visible';
    });

    (function () {
      // Scroll-spy
      const links = document.querySelectorAll('.scroll-nav a');
      const sections = document.querySelectorAll('main section[id]');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((e) => {
          const link = document.querySelector(`.scroll-nav a[href="#${e.target.id}"]`);
          if (e.isIntersecting) {
            links.forEach((a) => a.classList.remove('active'));
            link?.classList.add('active');
          }
        });
      }, { threshold: 0.5 });
      sections.forEach((s) => observer.observe(s));

      // Sticky header
      const header = document.getElementById('main-header');
      window.addEventListener('scroll', () =>
        header.classList.toggle('sticky', window.scrollY > 20)
      );

      // Theme toggle + persistence
      const toggle = document.getElementById('theme-toggle');
      const root = document.documentElement;
      const saved = localStorage.getItem('theme') || 'dark';
      root.setAttribute('data-theme', saved);
      toggle.textContent = saved === 'light' ? '🌙' : '☀️';
      toggle.addEventListener('click', () => {
        const next = root.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
        root.setAttribute('data-theme', next);
        localStorage.setItem('theme', next);
        toggle.textContent = next === 'light' ? '🌙' : '☀️';
      });

      // Restore scroll position
      window.addEventListener('beforeunload', () =>
        localStorage.setItem('scrollY', window.scrollY)
      );
      window.addEventListener('load', () => {
        const y = +localStorage.getItem('scrollY') || 0;
        window.scrollTo({ top: y });
      });
    })();
  </script>
</body>
</html>
